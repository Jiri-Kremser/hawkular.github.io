

== Base Path
#`http://localhost:8080/hawkular/alerts`#

== REST APIs
=== Operations about alerts



==============================================
*Endpoint* `/`


NOTE: *Get alerts with optional filtering* +
      _Pagination is not yet implemented._

*Method*
****
*GET* `/`
****

*query parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |startTime|false|filter out alerts created before this time, millisecond since epoch|long
    |endTime|false|filter out alerts created after this time, millisecond since epoch|long
    |triggerIds|false|filter out alerts for unspecified triggers, comma separated list of trigger IDs|string
    |tags|false|filter out alerts for unspecified tags, comma separated list of tags, each tag of format [category|]name|string
|=======================

*Response* +
Collection&lt;Alert&gt;[org.hawkular.alerts.api.model.condition.Alert]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/reload`


NOTE: *Reload all definitions into the alerts service* +
      _This service is temporal for demos/poc, this functionality will be handled internallybetween definitions and alerts services_

*Method*
****
*GET* `/reload`
****


*Response* +
void

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/reload/{triggerId}`


NOTE: *Reload a specific trigger into the alerts service* 

*Method*
****
*GET* `/reload/{triggerId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true||string
|=======================

*Response* +
void

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +

=== Operations for actions



==============================================
*Endpoint* `/actions/send`


NOTE: *Send an action to the ActionService.* +
      _ActionService should not be invoked directly. This method is for demo/poc purposes._

*Method*
****
*POST* `/actions/send`
****

*body parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |body|false||<<Action,Action>>
|=======================

*Response* +
void

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/actions/`


NOTE: *Find all action ids* +
      _Pagination is not yet implemented_

*Method*
****
*GET* `/actions/`
****


*Response* +
Collection[string]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Create a new action* +
      _Action properties are variable and depends on the action plugin. A user needs to request previously ActionPlugin API to get the list of properties to fill for a specific type. All actions should have actionId and actionPlugin as mandatory properties_

*Method*
****
*POST* `/actions/`
****

*body parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |body|true|Action properties. Properties depend of specific ActionPlugin.|<<UNKNOWN[string],UNKNOWN[string]>>
|=======================

*Response* +
Map&lt;String, String&gt;[java.lang.String]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/actions/plugin/{actionPlugin}`


NOTE: *Find all action ids of an specific action plugin* +
      _Pagination is not yet implemented_

*Method*
****
*GET* `/actions/plugin/{actionPlugin}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |actionPlugin|true|Action plugin to filter query for action ids|string
|=======================

*Response* +
Collection[string]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/actions/{actionId}`


NOTE: *Get an existing action* +
      _Action is represented as a map of properties._

*Method*
****
*GET* `/actions/{actionId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |actionId|true|Action id to be retrieved|string
|=======================

*Response* +
Map&lt;String, String&gt;[java.lang.String]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Update an existing action* +
      _Action properties are variable and depends on the action plugin. A user needs to request previously ActionPlugin API to get the list of properties to fill for a specific type. All actions should have actionId and actionPlugin as mandatory properties_

*Method*
****
*PUT* `/actions/{actionId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |actionId|true|action id to be updated|string
|=======================
*body parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |body|true|Action properties. Properties depend of specific ActionPlugin.|<<UNKNOWN[string],UNKNOWN[string]>>
|=======================

*Response* +
void

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Delete an existing action* 

*Method*
****
*DELETE* `/actions/{actionId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |actionId|true|Action id to be deleted|string
|=======================

*Response* +
void

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +

=== Query operations for action plugins



==============================================
*Endpoint* `/plugins/`


NOTE: *Find all action plugins* +
      _Pagination is not yet implemented_

*Method*
****
*GET* `/plugins/`
****


*Response* +
Collection&lt;String&gt;[java.lang.String]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/plugins/{actionPlugin}`


NOTE: *Find list of properties to fill for a specific action plugin* +
      _Each action plugin can have a different and variable number of properties. This method should be invoked before of a creation of a new action._

*Method*
****
*GET* `/plugins/{actionPlugin}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |actionPlugin|true|Action plugin to query|string
|=======================

*Response* +
Collection&lt;String&gt;[java.lang.String]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +

=== CRUD operations for Trigger defs



==============================================
*Endpoint* `/triggers/tags`


NOTE: *Create a new trigger tag* +
      _Returns Tag created if operation finished correctly_

*Method*
****
*POST* `/triggers/tags`
****

*body parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |body|true|Tag to be created|<<Tag,Tag>>
|=======================

*Response* +
Tag

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/triggers/{triggerId}/dampenings/{dampeningId}`


NOTE: *Get an existing dampening* 

*Method*
****
*GET* `/triggers/{triggerId}/dampenings/{dampeningId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be retrieved|string
    |dampeningId|true|Dampening id|string
|=======================

*Response* +
Dampening

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Update an existing dampening definition* 

*Method*
****
*PUT* `/triggers/{triggerId}/dampenings/{dampeningId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be retrieved|string
    |dampeningId|true|Dampening id|string
|=======================
*body parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |body|true|Updated dampening definition|<<Dampening,Dampening>>
|=======================

*Response* +
void

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Delete an existing dampening definition* 

*Method*
****
*DELETE* `/triggers/{triggerId}/dampenings/{dampeningId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be retrieved|string
    |dampeningId|true|Dampening id for dampening definition to be deleted|string
|=======================

*Response* +
void

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/triggers/{triggerId}/dampenings`


NOTE: *Create a new dampening* +
      _Returns Dampening created if operation finished correctly_

*Method*
****
*POST* `/triggers/{triggerId}/dampenings`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id attached to dampening|string
|=======================
*body parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |body|true|Dampening definition to be created|<<Dampening,Dampening>>
|=======================

*Response* +
Dampening

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Get a list with all dampenings linked with a trigger.* +
      _Pagination is not yet implemented _

*Method*
****
*GET* `/triggers/{triggerId}/dampenings`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be retrieved|string
|=======================

*Response* +
Collection&lt;Dampening&gt;[org.hawkular.alerts.api.model.dampening.Dampening]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/triggers/{triggerId}/conditions`


NOTE: *Get a map with all conditions id an specific trigger.* 

*Method*
****
*GET* `/triggers/{triggerId}/conditions`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be retrieved|string
|=======================

*Response* +
Collection&lt;Condition&gt;[org.hawkular.alerts.api.model.condition.Condition]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Create a new condition for a specific trigger* 

*Method*
****
*POST* `/triggers/{triggerId}/conditions`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be retrieved|string
|=======================
*body parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |body|false|Json representation of a condition|string
|=======================

*Response* +
Collection[Condition]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/triggers/{triggerId}/conditions/{conditionId}`


NOTE: *Get a condition for a specific trigger id.* 

*Method*
****
*GET* `/triggers/{triggerId}/conditions/{conditionId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be retrieved|string
    |conditionId|true||string
|=======================

*Response* +
Condition

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Update an existing condition for a specific trigger* 

*Method*
****
*PUT* `/triggers/{triggerId}/conditions/{conditionId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be retrieved|string
    |conditionId|true||string
|=======================
*body parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |body|false|Json representation of a condition|string
|=======================

*Response* +
void

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Delete an existing condition for a specific trigger* 

*Method*
****
*DELETE* `/triggers/{triggerId}/conditions/{conditionId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be retrieved|string
    |conditionId|true||string
|=======================

*Response* +
Collection&lt;Condition&gt;[org.hawkular.alerts.api.model.condition.Condition]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/triggers/{triggerId}/tags`


NOTE: *Delete an existing trigger definition* 

*Method*
****
*POST* `/triggers/{triggerId}/tags`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger id of tags to be deleted|string
|=======================
*query parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |category|false|Category of tags to be deleted|string
    |name|false|Name of tags to be deleted|string
|=======================

*Response* +
void

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Get tags for a trigger.* 

*Method*
****
*GET* `/triggers/{triggerId}/tags`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger id for the retrieved Tags|string
|=======================
*query parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |category|false|Category of tags to be retrieved|string
|=======================

*Response* +
Collection&lt;Tag&gt;[org.hawkular.alerts.api.model.trigger.Tag]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/triggers/`


NOTE: *Find all triggers definitions* +
      _Pagination is not yet implemented_

*Method*
****
*GET* `/triggers/`
****


*Response* +
Collection&lt;Trigger&gt;[org.hawkular.alerts.api.model.trigger.Trigger]

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Create a new trigger definitions. If trigger ID is null, a (likely) unique ID will be generated* +
      _Returns Trigger created if operation finished correctly_

*Method*
****
*POST* `/triggers/`
****

*body parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |body|true|Trigger definition to be created|<<Trigger,Trigger>>
|=======================

*Response* +
Trigger

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/triggers/{triggerId}`


NOTE: *Get an existing trigger definition* 

*Method*
****
*GET* `/triggers/{triggerId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be retrieved|string
|=======================

*Response* +
Trigger

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Update an existing trigger definition* 

*Method*
****
*PUT* `/triggers/{triggerId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be updated|string
|=======================
*body parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |body|true|Updated trigger definition|<<Trigger,Trigger>>
|=======================

*Response* +
void

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

NOTE: *Delete an existing trigger definition* 

*Method*
****
*DELETE* `/triggers/{triggerId}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be deleted|string
|=======================

*Response* +
void

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +



==============================================
*Endpoint* `/triggers/{triggerId}/dampenings/mode/{triggerMode}`


NOTE: *Get a dampening using triggerId and triggerMode* +
      _Similar as getDampening(dampeningId)_

*Method*
****
*GET* `/triggers/{triggerId}/dampenings/mode/{triggerMode}`
****

*path parameters*

[options="header"]
|=======================
|Parameter|Required|Description|Data Type
    |triggerId|true|Trigger definition id to be retrieved|string
    |triggerMode|true|Trigger mode|<<org.hawkular.alerts.api.model.trigger.Trigger$Mode,org.hawkular.alerts.api.model.trigger.Trigger$Mode>>
|=======================

*Response* +
Dampening

*Status codes*
[options="header"]
|=======================
| Status Code | Reason      | Response Model
No codes specified
|=======================

{empty} +

==============================================

{empty} +


== Data Types

{empty} +

[[Action]]
=== Action
[options="header"]
|=======================
| name | type | required | access | description | notes
|message|string|optional|-|-|-
|actionId|string|optional|-|-|-
|=======================


[[Condition]]
=== Condition
[options="header"]
|=======================
| name | type | required | access | description | notes
|type|TypeType|optional|-|- Allowable values:AVAILABILITY, COMPARE, STRING, THRESHOLD, RANGE|-
|conditionId|string|optional|-|-|-
|triggerMode|ModeMode|optional|-|- Allowable values:FIRE, SAFETY|-
|triggerId|string|optional|-|-|-
|dataId|string|optional|-|-|-
|=======================


[[Dampening]]
=== Dampening
[options="header"]
|=======================
| name | type | required | access | description | notes
|dampeningId|string|optional|-|-|-
|type|TypeType|optional|-|- Allowable values:STRICT, RELAXED_COUNT, RELAXED_TIME, STRICT_TIME|-
|evalTrueSetting|int|optional|-|-|-
|evalTimeSetting|long|optional|-|-|-
|triggerMode|ModeMode|optional|-|- Allowable values:FIRE, SAFETY|-
|triggerId|string|optional|-|-|-
|evalTotalSetting|int|optional|-|-|-
|=======================


[[Tag]]
=== Tag
[options="header"]
|=======================
| name | type | required | access | description | notes
|category|string|optional|-|-|-
|visible|boolean|optional|-|-|-
|name|string|optional|-|-|-
|triggerId|string|optional|-|-|-
|=======================


[[Trigger]]
=== Trigger
[options="header"]
|=======================
| name | type | required | access | description | notes
|actions|SetSet|optional|-|-|-
|safetyEnabled|boolean|optional|-|-|-
|safetyMatch|MatchMatch|optional|-|- Allowable values:ALL, ANY|-
|description|string|optional|-|-|-
|name|string|optional|-|-|-
|firingMatch|MatchMatch|optional|-|- Allowable values:ALL, ANY|-
|enabled|boolean|optional|-|-|-
|id|string|optional|-|-|-
|=======================


{empty} +
{empty} +
{empty} +
